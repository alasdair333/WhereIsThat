jobs:
- name: whereIsThat
  plan:
  - get: whereIsThat-git
    trigger: true
  - config:
      caches:
      - path: $HOME/.m2/repository
      - path: $HOME/.gradle/caches/
      - path: $HOME/.gradle/wrapper/
      container_limits: {}
      image_resource:
        name: ""
        source:
          repository: maven
          tag: 3.8-openjdk-18
        type: registry-image
      inputs:
      - name: whereIsThat-git
      platform: linux
      run:
        args:
        - -c
        - |
          java -Xmx32m -version
          javac -J-Xmx32m -version

          cd whereIsThat-git

          mvn clean
          mvn install
        path: /bin/sh
        user: root
    task: run-tests
  public: true

resources:
- icon: github
  name: whereIsThat-git
  source:
    uri: https://github.com/alasdair333/WhereIsThat.git
  type: git